{% extends 'layouts/main.html' %}
{% block title %} FIFA world cup 18{% endblock %}
{% block content %}

<div class="page-header">
    <h1>Groups <a href="/get_tournament"><button type="button" class="btn btn-primary">simulate again</button></a> </h1>
</div>

    <div class="container" id="group_table" >
        <div class="row">
            <div class="col">
                <table>
                    <tr><td>Group A </td><td></td><td>
                        <button type="button" class="btn btn-sm" data-toggle="modal" data-target="#modal_a" style="color:#f3f3f3" id="btndt_a">
                            <p style="color: #000;">details</p>
                        </button></td></tr>
                    <tr id = "A1"></tr>
                    <tr id = "A2"> </tr>
                    <tr id = "A3"></tr>
                    <tr id = "A4"></tr>
                </table>
            </div>
            <div class="col">
                 <table>
                    <tr><td>Group B</td><td></td><td>
                        <button type="button" class="btn btn-sm" data-toggle="modal" data-target="#modal_b" style="color:#f3f3f3"  id="btndt_b">
                            <p style="color: #000;">details</p>
                        </button></td></tr>
                    <tr id = "B1"></tr>
                    <tr id = "B2"></tr>
                    <tr id = "B3"></tr>
                    <tr id = "B4"></tr>
                </table>
            </div>
            <div class="col">
                 <table>
                    <tr><td>Group C</td><td></td><td>
                        <button type="button" class="btn btn-sm" data-toggle="modal" data-target="#modal_c" style="color:#f3f3f3"  id="btndt_c">
                            <p style="color: #000;">details</p>
                        </button></td></tr>
                    <tr id = "C1"></tr>
                    <tr id = "C2"></tr>
                    <tr id = "C3"></tr>
                    <tr id = "C4"></tr>
                </table>
            </div>
            <div class="col">
                 <table>
                    <tr><td>Group D</td><td></td><td>
                        <button type="button" class="btn btn-sm" data-toggle="modal" data-target="#modal_d" style="color:#f3f3f3;"  id="btndt_d">
                            <p style="color: #000;">details</p>
                        </button></td></tr>
                    <tr id = "D1"></tr>
                    <tr id = "D2">{{ dtwo }}</tr>
                    <tr id = "D3"></tr>
                    <tr id = "D4"></tr>
                </table>
            </div>
        </div>
        <br>
        <br>
    <div class="row">
            <div class="col">
                 <table>
                    <tr><td>Group E</td><td></td><td>
                        <button type="button" class="btn btn-sm" data-toggle="modal" data-target="#modal_e" style="color:#f3f3f3; none"  id="btndt_e">
                            <p style="color: #000;">details</p>
                        </button></td></tr>
                    <tr id = "E1"></tr>
                    <tr id = "E2"></tr>
                    <tr id = "E3"></tr>
                    <tr id = "E4"></tr>
                </table>
            </div>
            <div class="col">
                 <table>
                    <tr><td>Group F</td><td></td><td>
                        <button type="button" class="btn btn-sm" data-toggle="modal" data-target="#modal_f" style="color:#f3f3f3"  id="btndt_f">
                            <p style="color: #000;">details</p>
                        </button></td></tr>
                    <tr id = "F1"></tr>
                    <tr id = "F2"></tr>
                    <tr id = "F3"></tr>
                    <tr id = "F4"></tr>
                </table>
            </div>
            <div class="col">
                 <table>
                    <tr><td>Group G</td><td></td><td>
                        <button type="button" class="btn btn-sm" data-toggle="modal" data-target="#modal_g" style="color:#f3f3f3"  id="btndt_g">
                            <p style="color: #000;">details</p>
                        </button></td></tr>
                    <tr id = "G1"></tr>
                    <tr id = "G2"></tr>
                    <tr id = "G3"></tr>
                    <tr id = "G4"></tr>
                </table>
            </div>
            <div class="col">
                 <table>
                    <tr><td>Group H</td><td></td><td>
                        <button type="button" class="btn btn-sm" data-toggle="modal" data-target="#modal_h" style="color:#f3f3f3"  id="btndt_h">
                            <p style="color: #000;">details</p>
                        </button></td></tr>
                    <tr id = "H1"></tr>
                    <tr id = "H2"></tr>
                    <tr id = "H3"></tr>
                    <tr id = "H4"></tr>
                </table>
            </div>
        </div>
    </div>
    <br><br><br>
    <div class="page-header">
        <h1>Matchplan <button type="button" class="btn btn-primary" onclick="setTimeout(start_show, 3000)">PLAY</button></h1>

    </div>
    <div id="match_plan" style="font-size: large">
        <div class="row">
            <div class="col" id="A1_1">1st A</div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="B1">1st B</div>
        </div>
        <div class="row">
            <div class="col"></div>
            <div class="col" id="WA1B2"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="WB1A2"></div>
            <div class="col"></div>
        </div>
        <div class="row">
            <div class="col" id="B2">2nd B</div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="A2">2nd A</div>
        </div>
        <div class="row">
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="SEM1"></div>
            <div class="col"></div>
              <div class="col" id="sem2"></div>
            <div class="col"></div>
            <div class="col"></div>
        </div>
        <div class="row">
            <div class="col" id="C1">1st C</div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="D1">1st D</div>
        </div>
        <div class="row">
            <div class="col"></div>
            <div class="col" id="WC1D2"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="WD1C2"></div>
            <div class="col"></div>
        </div>
        <div class="row">
            <div class="col" id="D2">2nd D</div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="C2">2nd C</div>
        </div>
        <div class="row">
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="FINAL">
                <table>
                    <tr id ="FINAL1"></tr><br>
                    <tr id ="FINAL2"></tr>
                </table>
            </div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
        </div>
        <div class="row">
            <div class="col" id="E1">1st E</div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="F1">1st F</div>
        </div>
        <div class="row">
            <div class="col"></div>
            <div class="col" id="WE1F2"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="WF1E2"></div>
            <div class="col"></div>
        </div>
        <div class="row">
            <div class="col" id="F2">2nd F</div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="E2">2nd E</div>
        </div>
        <div class="row">
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="SEMI3"></div>
            <div class="col"></div>
              <div class="col" id="SEMI4"></div>
            <div class="col"></div>
            <div class="col"></div>
        </div>
        <div class="row">
            <div class="col" id="G1">1st G</div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="H1">1st H</div>
        </div>
        <div class="row">
            <div class="col"></div>
            <div class="col" id="WG1H2"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="WH1G2"></div>
            <div class="col"></div>
        </div>
        <div class="row">
            <div class="col" id="h2">2nd H</div>
            <div class="col"></div>statisitcs
            <div class="col"></div>statisitcs
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="g2">2nd G</div>
        </div>
        <div class="row">
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col" id="SEMI">
                <table>
                    <tr id="WINNER"></tr>
                </table>
            </div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
        </div>
    </div>
    <br><br><br>
    <div class="page-header">
    <h1>Statistics</h1>
    </div>
    <div id="statistics">
        <script>
        //  the data that powers the bar chart, a simple array of numeric values
        var chartdata = [40, 60, 80, 100, 70, 120, 100, 60, 70, 150, 120, 140];
        
        //  the size of the overall svg element
        var height = 200,
            width = 720,
        
        //  the width of each bar and the offset between each bar
            barWidth = 40,
            barOffset = 20;
        
        
            d3.select('#statistics').append('svg')
            .attr('width', width)
            .attr('height', height)
            .style('background', '#dff0d8')
            .selectAll('rect').data(chartdata)
            .enter().append('rect')
                .style({'fill': '#3c763d', 'stroke': '#d6e9c6', 'stroke-width': '5'})
                .attr('width', barWidth)
                .attr('height', function (data) {
                    return data;
                })
                .attr('x', function (data, i) {
                    return i * (barWidth + barOffset);
                })
                .attr('y', function (data) {
                    return height - data;
                });    
        </script>
    </div>

    <br>
    <div id='bar-chart-ordinal'></div>
        <style>
 
            .bar {
              fill: steelblue;
            }
             
            .bar:hover {
              fill: brown;
            }
             
            .axis {
              font: 10px sans-serif;
            }
             
            .axis path,
            .axis line {
              fill: none;
              stroke: #000;
              shape-rendering: crispEdges;
            }
             
            .x.axis path { 
              fill: none;
              stroke: #000;
              shape-rendering: crispEdges;
            }
             
        </style>
        <script>
 
            var margin = {top: 20, right: 20, bottom: 50, left: 80},
                //width = 960 - margin.left - margin.right,
                width = d3.select('#group_table')[0][0].clientWidth- margin.left - margin.right,
                height = 400 - margin.top - margin.bottom;
             
            var x = d3.scale.ordinal()
                .rangeRoundBands([0, width], .1);
             
            var y = d3.scale.linear()
                .range([height, 0 + margin.top ]);
             
            var xAxis = d3.svg.axis()
                .scale(x)
                .orient("bottom");
             
            var yAxis = d3.svg.axis()
                .scale(y)
                .orient("left")
                .ticks(10); //  .ticks(10, "%");
             
            var svg = d3.select("#bar-chart-ordinal").append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
             

            
            //var countries = ['GER', 'BRA', 'ENG', 'FRA'];
            //var wins = [123, 321, 321, 223];
            //var data;
            //data.countries = countries;
            //data.wins = wins;



            var data = [
                {'country': 'BRA', 'wins': 1248},
                {'country': 'ARG', 'wins': 1101},
                {'country': 'GER', 'wins': 952},
                {'country': 'RUS', 'wins': 887},
                {'country': 'ENG', 'wins': 709},
                {'country': 'POR', 'wins': 687},
                {'country': 'FRA', 'wins': 614},
                {'country': 'ESP', 'wins': 613},
                {'country': 'SUI', 'wins': 536},
                {'country': 'CRO', 'wins': 405},
                {'country': 'BEL', 'wins': 381},
                {'country': 'DEN', 'wins': 223},
                {'country': 'COL', 'wins': 193},
                {'country': 'SRB', 'wins': 175},
                {'country': 'URU', 'wins': 168},
                {'country': 'MEX', 'wins': 156},
                {'country': 'POL', 'wins': 105},
                {'country': 'SWE', 'wins': 104},
                {'country': 'KOR', 'wins': 99},
                {'country': 'AUS', 'wins': 91},
                {'country': 'IRN', 'wins': 87},
                {'country': 'JPN', 'wins': 86},
                {'country': 'KSA', 'wins': 81},
                {'country': 'CRC', 'wins': 64},
                {'country': 'NGA', 'wins': 57},
                {'country': 'SEN', 'wins': 36}, 
                {'country': 'TUN', 'wins': 32},
                {'country': 'PAN', 'wins': 31},
                {'country': 'EGY', 'wins': 26},
                {'country': 'MAR', 'wins': 22},
                {'country': 'ISL', 'wins': 16},
                {'country': 'PER', 'wins': 15} 
            ]

            x.domain(data.map(function(d) { return d.country; }));
            y.domain([0, d3.max(data, function(d) { return d.wins; })]);
             
            svg.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis)
                .selectAll("text")  
                .style("text-anchor", "end")
                .attr("dx", "-.8em")
                .attr("dy", ".15em")
                .attr("transform", "rotate(-65)" )
                .append("text")             // text label for the x axis
                .attr("x", (width / 2) )
                .attr("y",  20 )
                .attr("dy", "1em")
                .style("text-anchor", "middle")
                .style("font-size", "16px") 
                .text("TEAMS");
                    
             // add y-axis
            svg.append("g")
                .attr("class", "y axis")
                .call(yAxis)
                .append("text") // and text1
                .attr("y", 6)
                .attr("dy", ".71em")
                .style("text-anchor", "end")
                .style("font-size", "16px") 
                .text("Wins");
             
            svg.selectAll(".bar")
                .data(data)
                .enter().append("rect")
                .attr("class", "bar")
                .attr("x", function(d) { return x(d.country); })
                .attr("width", x.rangeBand())
                .attr("y", function(d) { return y(d.wins); })
                .attr("height", function(d) { return height - y(d.wins); });


            // add a title
            svg.append("text")
                    .attr("x", (width / 2))             
                    .attr("y", 0 + (margin.top / 2))
                    .attr("text-anchor", "middle")  
                    .style("font-size", "24px") 
                    //.style("text-decoration", "underline")  
                    .text("Wins per Team (10000 Tounament Simulations)");
          
             



            function type(d) {
              d.revenue = +d.revenue;
              return d;
            }
             
            </script>
            



    <br><br><br>

    <div>
        <h2>Model Description</h2>
        <p>We are using multivariant Regression with a Random Forest Algorithm implemented in sklear to predict the score of a match given the two teams.</p>
        <ul>
            <lh>Features used [3 Variants - Short(10)|Mid(30)|Long(50)]:</lh>
            <li>Goals scored</li>
            <li>Goals conceded</li>
            <li>Winpercentage total</li>
            <li>Winpercentage against opponent (if available)</li>
        </ul>

        <ul>
            <lh>Data used and preprocessing:</lh>
        </ul>
    </div>


    <div class="page-header">
        <h1>Adjust <button type="button" class="btn btn-primary" onclick="adjust_settings">PLAY</button></h1>

    </div>
    <div id="user_input">
        <div class="row">
            <div class="col"></div>
            <div class="col">
                <input id="slider1"  type="range" />
                <input id="slider1"  type="range" />
                <input id="slider1"  type="range" />
            </div>
        </div>
    </div>



    <!--- MODALS---->
    <div class="modal" id="modal_a">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">detail results: group a</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body" id="content_ga">
                    {{ groupa|safe }}
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>
     <div class="modal" id="modal_b">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">detail results: group b</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    {{ groupb|safe }}
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>
     <div class="modal" id="modal_c">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">detail results: group c</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    {{ groupc|safe }}
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>
     <div class="modal" id="modal_d">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">detail results: group d</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    {{ groupd|safe }}
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>
     <div class="modal" id="modal_e">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">detail results: group e</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    {{ groupe|safe }}
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>
     <div class="modal" id="modal_f">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">detail results: group f</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    {{ groupf|safe }}
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>
     <div class="modal" id="modal_g">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">detail results: group g</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    {{ groupg|safe }}
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>
     <div class="modal" id="modal_h">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">detail results: group h</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    {{ grouph|safe }}
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>


    <script>
        $(document).ready(function () {
            // fill static groups
            $("#A1").html(get_conchtml_table("RUS", ""));
            $("#A2").html(get_conchtml_table("KSA", ""));
            $("#A3").html(get_conchtml_table("EGY", ""));
            $("#A4").html(get_conchtml_table("URU", ""));

            $("#B1").html(get_conchtml_table("POR", ""));
            $("#B2").html(get_conchtml_table("ESP", ""));
            $("#B3").html(get_conchtml_table("MAR", ""));
            $("#B4").html(get_conchtml_table("IRN", ""));

            $("#C1").html(get_conchtml_table("FRA", ""));
            $("#C2").html(get_conchtml_table("AUS", ""));
            $("#C3").html(get_conchtml_table("PER", ""));
            $("#C4").html(get_conchtml_table("DEN", ""));

            $("#D1").html(get_conchtml_table("ARG", ""));
            $("#D2").html(get_conchtml_table("ISL", ""));
            $("#D3").html(get_conchtml_table("CRO", ""));
            $("#D4").html(get_conchtml_table("NGA", ""));

            $("#E1").html(get_conchtml_table("BRA", ""));
            $("#E2").html(get_conchtml_table("SUI", ""));
            $("#E3").html(get_conchtml_table("CRC", ""));
            $("#E4").html(get_conchtml_table("SRB", ""));

            $("#F1").html(get_conchtml_table("GER", ""));
            $("#F2").html(get_conchtml_table("MEX", ""));
            $("#F3").html(get_conchtml_table("SWE", ""));
            $("#F4").html(get_conchtml_table("KOR", ""));

            $("#G1").html(get_conchtml_table("BEL", ""));
            $("#G2").html(get_conchtml_table("PAN", ""));
            $("#G3").html(get_conchtml_table("TUN" , ""));
            $("#G4").html(get_conchtml_table("ENG", ""));

            $("#H1").html(get_conchtml_table("POL", ""));
            $("#H2").html(get_conchtml_table("SEN", ""));
            $("#H3").html(get_conchtml_table("COL", ""));
            $("#H4").html(get_conchtml_table("JPN", ""));




        });
    
    function get_conchtml_table(team_ini, points) {
        return '<td><img src=\"/static/img/' +team_ini+ '.png\" width=\"30\" height=\"10\"></td><td>'+team_ini+' </td><td>'+points+'</td>';
    }

    function get_conchtml_plan(team_ini, points) {
        return '<td><img src=\"/static/img/' +team_ini+ '.png\" width=\"30\" height=\"10\"></td><td>'+team_ini+' </td>';
    }

    function start_show() {
        $("#A1_1").html(get_conchtml_plan("RUS", " 4"));
    }
    function load_gtables() {
        show_buttons();
    }

    function adjust_settings() {

    }
    function show_buttons() {
        $("#btndt_a").show()
        $("#btndt_b").show()
        $("#btndt_c").show()
        $("#btndt_d").show()
        $("#btndt_e").show()
        $("#btndt_f").show()
        $("#btndt_g").show()
        $("#btndt_h").show()

    }

    </script>
{% endblock %}
